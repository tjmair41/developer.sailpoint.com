"use strict";(self.webpackChunksailpoint_developer_portal=self.webpackChunksailpoint_developer_portal||[]).push([[63228],{83970:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>p,default:()=>u,frontMatter:()=>s,metadata:()=>d,toc:()=>c});var a=n(87462),i=(n(67294),n(3905)),r=n(65488),o=n(85162);const s={id:"responding-to-response-required-triggers",title:"Responding to Response Required Triggers",pagination_label:"Responding to Response Required Triggers",sidebar_label:"Responding to Response Required Triggers",sidebar_position:6,sidebar_class_name:"respondingResponseRequiredTriggers",keywords:["event","trigger","request_response"],description:"Specify how your application interacts with response required type trigger services.",slug:"/docs/event-triggers/responding-request-response-trigger",tags:["Event Triggers"]},p=void 0,d={unversionedId:"docs/identity-now/event-triggers/responding-to-response-required-triggers",id:"docs/identity-now/event-triggers/responding-to-response-required-triggers",title:"Responding to Response Required Triggers",description:"Specify how your application interacts with response required type trigger services.",source:"@site/products/idn/docs/identity-now/event-triggers/responding-to-a-request-response-trigger.mdx",sourceDirName:"docs/identity-now/event-triggers",slug:"/docs/event-triggers/responding-request-response-trigger",permalink:"/idn/docs/event-triggers/responding-request-response-trigger",draft:!1,editUrl:"https://github.com/sailpoint-oss/developer-community-site/edit/main/products/idn/docs/identity-now/event-triggers/responding-to-a-request-response-trigger.mdx",tags:[{label:"Event Triggers",permalink:"/idn/tags/event-triggers"}],version:"current",lastUpdatedBy:"GitHub Action Bot",lastUpdatedAt:1696346252,formattedLastUpdatedAt:"Oct 3, 2023",sidebarPosition:6,frontMatter:{id:"responding-to-response-required-triggers",title:"Responding to Response Required Triggers",pagination_label:"Responding to Response Required Triggers",sidebar_label:"Responding to Response Required Triggers",sidebar_position:6,sidebar_class_name:"respondingResponseRequiredTriggers",keywords:["event","trigger","request_response"],description:"Specify how your application interacts with response required type trigger services.",slug:"/docs/event-triggers/responding-request-response-trigger",tags:["Event Triggers"]},sidebar:"idnDocs",previous:{title:"Testing Triggers",permalink:"/idn/docs/event-triggers/testing-triggers"},next:{title:"Available Event Triggers",permalink:"/idn/docs/event-triggers/available"}},l={},c=[{value:"Invocation response modes for response required type triggers",id:"invocation-response-modes-for-response-required-type-triggers",level:2},{value:"Responding to response required triggers",id:"responding-to-response-required-triggers",level:2},{value:"Trigger invocation status",id:"trigger-invocation-status",level:2}],g={toc:c};function u(e){let{components:t,...n}=e;return(0,i.kt)("wrapper",(0,a.Z)({},g,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h2",{id:"invocation-response-modes-for-response-required-type-triggers"},"Invocation response modes for response required type triggers"),(0,i.kt)("p",null,"You can specify how your application interacts with a response required (",(0,i.kt)("inlineCode",{parentName:"p"},"REQUEST_RESPONSE"),") type trigger service by selecting an invocation response mode in the ",(0,i.kt)("strong",{parentName:"p"},"Response Type")," dropdown when editing or creating a ",(0,i.kt)("inlineCode",{parentName:"p"},"REQUEST_RESPONSE")," subscription. There are three response modes to choose from: ",(0,i.kt)("inlineCode",{parentName:"p"},"SYNC"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"ASYNC"),", and ",(0,i.kt)("inlineCode",{parentName:"p"},"DYNAMIC"),". These response modes are only available when the subscription type is set to ",(0,i.kt)("inlineCode",{parentName:"p"},"HTTP"),"."),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Response Modes"),(0,i.kt)("th",{parentName:"tr",align:"center"},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"SYNC")),(0,i.kt)("td",{parentName:"tr",align:"center"},"This type of response creates a ",(0,i.kt)("em",{parentName:"td"},"synchronous")," flow between the trigger service and the custom application. Once a trigger has been invoked, the custom application is expected to respond within 10 seconds. If the application takes longer than 10 seconds to respond, the trigger invocation will terminate without making any decisions.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"ASYNC")),(0,i.kt)("td",{parentName:"tr",align:"center"},"This type of response creates an ",(0,i.kt)("em",{parentName:"td"},"asynchronous")," flow between the trigger service and the custom application. When a trigger is invoked, the custom application does not need to respond immediately. The trigger service will provide a URL and a secret that the custom application can use to complete the invocation at a later time. The application must complete the invocation before the configured deadline on the subscription.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"DYNAMIC")),(0,i.kt)("td",{parentName:"tr",align:"center"},"This type of response gives the custom application the ability to choose whether it handles the invocation request synchronously or asynchronously on a per-event basis. In some cases, the application may choose ",(0,i.kt)("inlineCode",{parentName:"td"},"SYNC")," mode because it is able to respond quickly to the invocation. In other cases, it may choose ",(0,i.kt)("inlineCode",{parentName:"td"},"ASYNC")," because it needs to run a long running task before responding to the invocation.")))),(0,i.kt)("h2",{id:"responding-to-response-required-triggers"},"Responding to response required triggers"),(0,i.kt)(r.Z,{mdxType:"Tabs"},(0,i.kt)(o.Z,{value:"sync",label:"SYNC Response",default:!0,mdxType:"TabItem"},(0,i.kt)("p",null,"The custom application responds to the trigger invocation with an appropriate payload. For example, the application may receive a request from the Access Request Dynamic Approver trigger. The application will have ",(0,i.kt)("strong",{parentName:"p"},"10 seconds")," to analyze the event details and respond with a 200 (OK) status code and a response payload that contains the identity to add to the approval chain. For example, the response may look like this:"),(0,i.kt)("p",null,"200 (OK)"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "id": "2c91808b6ef1d43e016efba0ce470906",\n  "name": "Adam Adams",\n  "type": "IDENTITY"\n}\n'))),(0,i.kt)(o.Z,{value:"async",label:"ASYNC Respose",mdxType:"TabItem"},(0,i.kt)("p",null,"The custom application only needs to acknowledge that it has received the trigger invocation request by returning an HTTP status of 200 (OK) with an empty JSON object (ex. ",(0,i.kt)("inlineCode",{parentName:"p"},"{}"),") in the response body within ",(0,i.kt)("strong",{parentName:"p"},"10 seconds")," of receiving the event. It then has until the configured deadline on the subscription to provide a full response to the invocation. For example, the application may receive a request from the Access Request Dynamic Approver trigger. An example of the request payload that the application might receive is as follows:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "_metadata": {\n    "callbackURL": "https://{tenant}.api.identitynow.com/beta/trigger-invocations/e9103ca9-02c4-bb0f-9441-94b3af012345/complete",\n    "responseMode": "async",\n    "secret": "c1c60493-3347-4550-9c00-123cdde",\n    "triggerId": "idn:access-request-dynamic-approver",\n    "triggerType": "requestResponse"\n  },\n  "accessRequestId": "4b4d982dddff4267ab12f0f1e72b5a6d",\n  "requestedBy": {\n    "id": "2c91808b6ef1d43e016efba0ce470906",\n    "name": "Adam Admin",\n    "type": "IDENTITY"\n  },\n  "requestedFor": {\n    "id": "2c91808b6ef1d43e016efba0ce470909",\n    "name": "Ed Engineer",\n    "type": "IDENTITY"\n  },\n  "requestedItems": [\n    {\n      "comment": "Ed needs this access for his day to day job activities",\n      "description": "Engineering Access",\n      "id": "2c91808b6ef1d43e016efba0ce470904",\n      "name": "Engineering Access",\n      "operation": "Add",\n      "type": "ACCESS_PROFILE"\n    }\n  ]\n}\n')),(0,i.kt)("p",null,"The application will immediately respond to the invocation with a 200 (OK) status code and an empty JSON object."),(0,i.kt)("p",null,"200 (OK)"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},"{}\n")),(0,i.kt)("p",null,"Once the application has made a decision about how to respond, it will use the ",(0,i.kt)("inlineCode",{parentName:"p"},"callbackURL")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"secret")," provided in the ",(0,i.kt)("inlineCode",{parentName:"p"},"_metadata")," object from the original request to complete the invocation. An example response might look like this:"),(0,i.kt)("p",null,"POST ",(0,i.kt)("inlineCode",{parentName:"p"},"https://{tenant}.api.identitynow.com/beta/trigger-invocations/e9103ca9-02c4-bb0f-9441-94b3af012345/complete")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "secret": "0f11f2a4-7c94-4bf3-a2bd-742580fe3bde",\n  "output": {\n    "id": "2c91808b6ef1d43e016efba0ce470906",\n    "name": "Adam Adams",\n    "type": "IDENTITY"\n  }\n}\n'))),(0,i.kt)(o.Z,{value:"dynamic",label:"DYNAMIC Response",mdxType:"TabItem"},(0,i.kt)("p",null,"The custom application determines arbitrarily whether to respond to the trigger invocation as ",(0,i.kt)("inlineCode",{parentName:"p"},"SYNC")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"ASYNC"),". If the application is supposed to respond as ",(0,i.kt)("inlineCode",{parentName:"p"},"SYNC"),", it should follow the ",(0,i.kt)("inlineCode",{parentName:"p"},"SYNC")," response type directions, responding within ",(0,i.kt)("strong",{parentName:"p"},"10 seconds")," of the invocation. In the case of ",(0,i.kt)("inlineCode",{parentName:"p"},"ASYNC"),", the custom application only needs to acknowledge that it has received the trigger invocation request with a 202 (Accepted) within ",(0,i.kt)("strong",{parentName:"p"},"10 seconds")," of receiving the event. It must complete the invocation at a later time by using the ",(0,i.kt)("inlineCode",{parentName:"p"},"callbackURL")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"secret")," provided in the ",(0,i.kt)("inlineCode",{parentName:"p"},"_metadata")," object."),(0,i.kt)("p",null,"An example of the request payload that the application might receive is as follows:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "_metadata": {\n    "callbackURL": "https://{tenant}.api.identitynow.com/beta/trigger-invocations/e9103ca9-02c4-bb0f-9441-94b3af012345/complete",\n    "responseMode": "async",\n    "secret": "c1c60493-3347-4550-9c00-123cdde",\n    "triggerId": "idn:access-request-dynamic-approver",\n    "triggerType": "requestResponse"\n  },\n  "accessRequestId": "4b4d982dddff4267ab12f0f1e72b5a6d",\n  "requestedBy": {\n    "id": "2c91808b6ef1d43e016efba0ce470906",\n    "name": "Adam Admin",\n    "type": "IDENTITY"\n  },\n  "requestedFor": {\n    "id": "2c91808b6ef1d43e016efba0ce470909",\n    "name": "Ed Engineer",\n    "type": "IDENTITY"\n  },\n  "requestedItems": [\n    {\n      "comment": "Ed needs this access for his day to day job activities",\n      "description": "Engineering Access",\n      "id": "2c91808b6ef1d43e016efba0ce470904",\n      "name": "Engineering Access",\n      "operation": "Add",\n      "type": "ACCESS_PROFILE"\n    }\n  ]\n}\n')),(0,i.kt)("p",null,"To respond as ",(0,i.kt)("inlineCode",{parentName:"p"},"SYNC"),", simply respond to the invocation within 10 seconds."),(0,i.kt)("p",null,"200 (OK)"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "id": "2c91808b6ef1d43e016efba0ce470906",\n  "name": "Adam Adams",\n  "type": "IDENTITY"\n}\n')),(0,i.kt)("p",null,"To respond as ",(0,i.kt)("inlineCode",{parentName:"p"},"ASYNC"),", start by responding to the invocation with a 202 (Accepted)."),(0,i.kt)("p",null,"202 (Accepted)"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},"{}\n")),(0,i.kt)("p",null,"Then, use the ",(0,i.kt)("inlineCode",{parentName:"p"},"callbackURL")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"secret")," to send a POST request to the invocation with the decision."),(0,i.kt)("p",null,"POST ",(0,i.kt)("inlineCode",{parentName:"p"},"https://{tenant}.api.identitynow.com/beta/trigger-invocations/e9103ca9-02c4-bb0f-9441-94b3af012345/complete")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "secret": "0f11f2a4-7c94-4bf3-a2bd-742580fe3bde",\n  "output": {\n    "id": "2c91808b6ef1d43e016efba0ce470906",\n    "name": "Adam Adams",\n    "type": "IDENTITY"\n  }\n}\n')))),(0,i.kt)("hr",null),(0,i.kt)("h2",{id:"trigger-invocation-status"},"Trigger invocation status"),(0,i.kt)("p",null,"To check the status of a particular trigger invocation, you can use the ",(0,i.kt)("a",{parentName:"p",href:"/idn/api/beta/list-trigger-invocation-status"},"list invocation statuses")," endpoint. The status endpoint works for both ",(0,i.kt)("inlineCode",{parentName:"p"},"REQUEST_RESPONSE")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"FIRE_AND_FORGET")," triggers. However, the status of ",(0,i.kt)("inlineCode",{parentName:"p"},"FIRE_AND_FORGET")," trigger invocations will contain null values in their ",(0,i.kt)("inlineCode",{parentName:"p"},"completeInvocationInput")," since ",(0,i.kt)("inlineCode",{parentName:"p"},"FIRE_AND_FORGET")," triggers don't need a response to complete."))}u.isMDXComponent=!0},65488:(e,t,n)=>{n.d(t,{Z:()=>u});var a=n(87462),i=n(67294),r=n(86010),o=n(72389),s=n(67392),p=n(7094),d=n(12466);const l="tabList__CuJ",c="tabItem_LNqP";function g(e){const{lazy:t,block:n,defaultValue:o,values:g,groupId:u,className:m}=e,h=i.Children.map(e.children,(e=>{if((0,i.isValidElement)(e)&&"value"in e.props)return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})),b=g??h.map((e=>{let{props:{value:t,label:n,attributes:a}}=e;return{value:t,label:n,attributes:a}})),k=(0,s.l)(b,((e,t)=>e.value===t.value));if(k.length>0)throw new Error(`Docusaurus error: Duplicate values "${k.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`);const v=null===o?o:o??h.find((e=>e.props.default))?.props.value??h[0].props.value;if(null!==v&&!b.some((e=>e.value===v)))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${v}" but none of its children has the corresponding value. Available values are: ${b.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);const{tabGroupChoices:y,setTabGroupChoices:f}=(0,p.U)(),[N,T]=(0,i.useState)(v),w=[],{blockElementScrollPositionUntilNextRender:C}=(0,d.o5)();if(null!=u){const e=y[u];null!=e&&e!==N&&b.some((t=>t.value===e))&&T(e)}const q=e=>{const t=e.currentTarget,n=w.indexOf(t),a=b[n].value;a!==N&&(C(t),T(a),null!=u&&f(u,String(a)))},R=e=>{let t=null;switch(e.key){case"Enter":q(e);break;case"ArrowRight":{const n=w.indexOf(e.currentTarget)+1;t=w[n]??w[0];break}case"ArrowLeft":{const n=w.indexOf(e.currentTarget)-1;t=w[n]??w[w.length-1];break}}t?.focus()};return i.createElement("div",{className:(0,r.Z)("tabs-container",l)},i.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":n},m)},b.map((e=>{let{value:t,label:n,attributes:o}=e;return i.createElement("li",(0,a.Z)({role:"tab",tabIndex:N===t?0:-1,"aria-selected":N===t,key:t,ref:e=>w.push(e),onKeyDown:R,onClick:q},o,{className:(0,r.Z)("tabs__item",c,o?.className,{"tabs__item--active":N===t})}),n??t)}))),t?(0,i.cloneElement)(h.filter((e=>e.props.value===N))[0],{className:"margin-top--md"}):i.createElement("div",{className:"margin-top--md"},h.map(((e,t)=>(0,i.cloneElement)(e,{key:t,hidden:e.props.value!==N})))))}function u(e){const t=(0,o.Z)();return i.createElement(g,(0,a.Z)({key:String(t)},e))}}}]);